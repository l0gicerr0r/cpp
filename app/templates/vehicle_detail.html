{% extends 'base.html' %}
{% block title %}{{ vehicle.make }} {{ vehicle.model }} - AutoMotive Hub{% endblock %}

{% block content %}
<div class="container py-5">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('main.list_vehicles') }}">Vehicles</a></li>
            <li class="breadcrumb-item active">{{ vehicle.make }} {{ vehicle.model }}</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-6">
            {% if vehicle.image_url %}
            <img src="{{ vehicle.image_url }}" class="img-fluid rounded shadow" alt="{{ vehicle.make }}">
            {% else %}
            <div class="bg-secondary d-flex align-items-center justify-content-center rounded" style="height: 400px;">
                <i class="bi bi-car-front display-1 text-white"></i>
            </div>
            {% endif %}
        </div>
        <div class="col-md-6">
            <h1>{{ vehicle.year }} {{ vehicle.make }} {{ vehicle.model }}</h1>
            <h2 class="text-primary mb-4">${{ "{:,.2f}".format(vehicle.price) }}</h2>
            
            <div class="card mb-4">
                <div class="card-header bg-dark text-white">
                    <i class="bi bi-info-circle"></i> Vehicle Details
                </div>
                <div class="card-body">
                    <table class="table table-borderless mb-0">
                        <tr>
                            <th>Make:</th>
                            <td>{{ vehicle.make }}</td>
                        </tr>
                        <tr>
                            <th>Model:</th>
                            <td>{{ vehicle.model }}</td>
                        </tr>
                        <tr>
                            <th>Year:</th>
                            <td>{{ vehicle.year }}</td>
                        </tr>
                        <tr>
                            <th>Listed by:</th>
                            <td>{{ vehicle.owner.username }}</td>
                        </tr>
                        <tr>
                            <th>Listed on:</th>
                            <td>{{ vehicle.created_at.strftime('%B %d, %Y') }}</td>
                        </tr>
                    </table>
                </div>
            </div>

            {% if vehicle.description %}
            <div class="card mb-4">
                <div class="card-header bg-dark text-white">
                    <i class="bi bi-file-text"></i> Description
                </div>
                <div class="card-body">
                    <p>{{ vehicle.description }}</p>
                </div>
            </div>
            {% endif %}

            <!-- Price Analysis from Custom Library -->
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <i class="bi bi-graph-up"></i> Price Analysis (Custom Library)
                </div>
                <div class="card-body">
                    <p><strong>Suggested Price Range:</strong></p>
                    <p class="mb-1">Min: ${{ "{:,.2f}".format(price_info.suggested_min) }}</p>
                    <p class="mb-1">Recommended: <strong class="text-success">${{ "{:,.2f}".format(price_info.suggested_price) }}</strong></p>
                    <p class="mb-0">Max: ${{ "{:,.2f}".format(price_info.suggested_max) }}</p>
                    <hr>
                    <small class="text-muted">Based on vehicle age ({{ price_info.vehicle_age }} years) and market data</small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
